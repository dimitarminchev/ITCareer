# Plant Service
Базата данни **plant_service** има следната E/R диаграма:
![E/R diagram](er.png) 

Part I. Data Definition Language (DDL)
---
cities
| Име на колoната | Тип данни                        | Ограничения                      |
|-----------------|----------------------------------|----------------------------------|
| Id              | Цяло число от 0 до 2,147,483,647 | Primary Key AUTO_INCREMENT       |
| name            | Низ съдържащ максимум 30 символа | Не се позволяват NULL стойности. |
| country_name    | Низ съдържащ максимум 80 символа | Не се позволяват NULL стойности. |

users
| Име на колoната | Тип данни                                                       | Ограничения                                                                |
|-----------------|-----------------------------------------------------------------|----------------------------------------------------------------------------|
| Id              | Цяло число от  0 до 2,147,483,647                               | Primary Key AUTO_INCREMENT                                                 |
| username        | Низ съдържащ максимум 50 символа                                | Не се позволяват NULL стойности. Стойността трябва да е уникална.          |
| password        | Низ съдържащ максимум символи                                   | Не се позволяват NULL стойности.                                           |
| first_name      | Низ съдържащ максимум 50 символа                                | Не се позволяват NULL стойности.                                           |
| last_name       | Низ съдържащ максимум 50 символа                                |                                                                            |
| age             | Цяло число от  0 до 2,147,483,647                               | Не се позволяват NULL стойности. Проверете дали потребителят е пълнолетен. |
| money           | Реално число, до 15 цифри, 2 от които след десетичната запетая. | Не се позволяват NULL стойности.                                           |
| city_id         | Цяло число от  0 до 2,147,483,647                               | Не се позволяват NULL стойности. Връзка с таблицата cities                 |
| register_date   | Дата                                                            | Не се позволяват NULL стойности.                                           |

orders
| Име на колoната | Тип данни                        | Ограничения                                               |
|-----------------|----------------------------------|-----------------------------------------------------------|
| Id              | Цяло число от 0 до 2,147,483,647 | Primary Key AUTO_INCREMENT                                |
| user_id         | Цяло число от 0 до 2,147,483,647 | Не се позволяват NULL стойности. Връзка с таблицата users |
| order_date      | Дата                             | Не се позволяват NULL стойности.                          |
| is_completed    | Boolean                          | Стойност по подразбиране false.                           |

plants
| Име на колoната | Тип данни                                                       | Ограничения                      |
|-----------------|-----------------------------------------------------------------|----------------------------------|
| id              | Цяло число от  0 до 2,147,483,647                               | Primary Key AUTO_INCREMENT       |
| name            | Низ съдържащ максимум 50 символа                                | Не се позволяват NULL стойности. |
| price           | Реално число, до 15 цифри, 2 от които след десетичната запетая. | Не се позволяват NULL стойности. |
| color           | Низ съдържащ максимум 50 символа                                |                                  |
| quantity        | Цяло число от  0 до 2,147,483,647                               | Стойност по подразбиране 0.      |

info_plants
| Име на колoната | Тип данни                        | Ограничения                                                             |
|-----------------|----------------------------------|-------------------------------------------------------------------------|
| Id              | Цяло число от 0 до 2,147,483,647 | Primary Key AUTO_INCREMENT                                              |
| plant_id        | Цяло число от 0 до 2,147,483,647 | Не се позволяват NULL стойности. Връзка с таблицата plants (one to one) |
| family          | Низ съдържащ максимум 50 символа | Не се позволяват NULL стойности.                                        |
| genus           | Низ съдържащ максимум 40 символа | Не се позволяват NULL стойности.                                        |
| purpose         | Низ съдържащ максимум 60 символа |                                                                         |

plants_orders 
| Име на колоната | Тип данни                        | Ограничения                                                   |
|-----------------|----------------------------------|---------------------------------------------------------------|
| plant_id        | Цяло число от 0 до 2,147,483,647 | Не се позволяват NULL стойности. Връзка с таблицата accounts. |
| order_id        | Цяло число от 0 до 2,147,483,647 | Не се позволяват NULL стойности. Връзка с таблицата trips.    |

**БЕЛЕЖКА: Направете композитен ключ.**

Part II. Queries 
---
Ще получите заявка **[ddl.sql](ddl.sql)**, която вмъква данни в базата. 

ВНИМАНИЕ: Копирайте структурата на базата, създадена при изпълнение на задание 1 преди да преминете към решаване на задачите от този раздел.

Query 1: Всички растения
Извлечете всички растения, които са с количество по – голямо от 10 и цена по – голяма от 15. Подредете растенията по цена в низходящ ред, след това по име във възходящ ред. Вземете първите 30 записа.

| id  | name                      | price  |
|-----|---------------------------|--------|
| 452 | Leichhardt's Datura       | 249.09 |
| 180 | Southwestern Brickellbush | 248.25 |
| 554 | Hemp                      | 247.47 |
| 760 | Beach Wormwood            | 247.25 |
| 681 | Orange Lichen             | 247.19 |

Query 2: Потребители без фамилия
Извлечете всички потребители, които нямат фамилно име и са под 60 годишна възраст. Подредете потребителите по години във възходящ ред, след това по потребителско име във възходящ ред.
За колона **register_day_month** вземете само деня и месеца разделени с "-".

| id  | username        | first_name | age | register_day_month |
|-----|-----------------|------------|-----|--------------------|
| 244 | lschade6r       | Lukas      | 18  | 21-2               |
| 175 | nyosselevitch4u | Nicko      | 18  | 9-4                |
| 628 | smanilowhf      | Saree      | 18  | 8-3                |
| 38  | ldeath11        | Lynnette   | 19  | 27-11              |
| 559 | shancillfi      | Sapphire   | 19  | 21-9               |
| 233 | psexton6g       | Priscilla  | 20  | 29-7               |

Query 3: Растения от семейство
Извлечете всички растения, които са от семейство **Poaceae** и имат налично количество. Подредете растенията по род във възходящ ред, след това по име във възходящ ред.

| id  | name                     | family  | genus      |
|-----|--------------------------|---------|------------|
| 577 | Black Sage               | Poaceae | Allium     |
| 658 | Lanceleaf Sage           | Poaceae | Anthurium  |
| 217 | Oregon False Goldenaster | Poaceae | Anthurium  |
| 243 | Rock Phacelia            | Poaceae | Anthurium  |
| 838 | Trichodon Moss           | Poaceae | Crotalaria |
| 773 | Hyssopus                 | Poaceae | Croton     |

Query 4: Потребители без поръчки
Извлечете всички потребители, които нямат поръчки. Подредете по година на регистриране във възходящ ред, след това по пълно име във възходящ ред.

| first_name        | username    | city            | register_year |
|-------------------|-------------|-----------------|---------------|
| Aindrea Slater    | aslater8g   | Oldenburg       | 2010          |
| Benito Dolligon   | bdolligon9h | Dortmund        | 2010          |
| Buddy Pether      | bpetherbd   | Duisburg        | 2010          |
| Chastity Bausmann | cbausmanne3 | Indianapolis    | 2010          |
| Clarita Loggie    | cloggieeb   | Nizhny Novgorod | 2010          |
| Eberto Marusyak   | emarusyak2w | Izhevsk         | 2010          |

Query 5: Получени поръчки
Извлечете за всеки потребител, броя на поръчки, които е получил. Подредете по брой на поръчките в низходящ ред, след това по първо име във възходящ ред. Вземете първите 10 записа.

| id  | full_name | age | received_orders |
|-----|-----------|-----|-----------------|
| 430 | Kelbee    | 32  | 4               |
| 14  | Amabel    | 21  | 3               |
| 274 | Cherin    | 71  | 3               |
| 335 | Colet     | 74  | 3               |
| 417 | Dahlia    | 68  | 3               |
| 577 | Diahann   | 52  | 3               |

Query 6: Поръчки по държави
Извлечете за всяка държава, стойността на всички поръчки  и броя на поръчки. Подредете по стойност на всички поръчките в низходящ ред, след това по броя на поръчките в низходящ ред.

| country_name   | total_sum | count_orders |
|----------------|-----------|--------------|
| Germany        | 50154.13  | 394          |
| United Kingdom | 21345.88  | 169          |
| United States  | 20192.17  | 151          |
| Bulgaria       | 20022.33  | 158          |
| Russia         | 14582.88  | 127          |

Query 7: Поръчки от род
Извлечете за всеки потребител, броя на всички поръчки, в които има растение от род "Begonia" Подредете по брой на поръчките в низходящ ред, след това по първо име във възходящ ред.

| user_id | first_name | orders |
|---------|------------|--------|
| 685     | Belvia     | 4      |
| 9       | Kyle       | 4      |
| 704     | Viv        | 4      |
| 278     | Hall       | 3      |
| 491     | Marcelline | 3      |
| 462     | Merilee    | 3      |
